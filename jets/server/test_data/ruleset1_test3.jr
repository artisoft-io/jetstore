# ///////////////////////////////////////////////////////////////////////////////////////
# Unit Test JetStore server process
# ---------------------------------------------------------------------------------------
import "support_test3.jr"

volatile_resource addlCodesInContractExclusion = "addlCodesInContractExclusion";
volatile_resource addlMultiCodesInContractExclusion = "addlMultiCodesInContractExclusion";

[Rule1]:
  (?config rdf:type RRConfig).
  (?config do_codesInContractExclusion true).
  (?claim rdf:type hc:TestClaim).
  (?claim hc:code ?code)
  ->
  (?claim addlMultiCodesInContractExclusion lk:CodeDescription multi_lookup ?code).
  (?claim addlCodesInContractExclusion lk:CodeDescription lookup ?code)
;

[Rule2,s=200]:
  (?claim rdf:type hc:TestClaim).
  not(?claim addlCodesInContractExclusion null)
  ->
  (?claim hc:is_code true)
;

[Rule3]:
  (?claim rdf:type hc:TestClaim).
  (?claim addlCodesInContractExclusion null)
  ->
  (?claim hc:is_code false)
;
